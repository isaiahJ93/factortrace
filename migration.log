2025-07-28 16:32:28,017 [INFO] üîç Running pre-flight checks...
2025-07-28 16:32:28,569 [INFO] ‚úÖ All pre-flight checks passed
2025-07-28 16:53:34,864 [INFO] üîç Running pre-flight checks...
2025-07-28 16:53:35,434 [INFO] ‚úÖ All pre-flight checks passed
2025-07-28 16:53:35,434 [INFO] ============================================================
2025-07-28 16:53:35,434 [INFO] STEP 1: Branch & Freeze
2025-07-28 16:53:35,434 [INFO] Running: git status --porcelain
2025-07-28 16:53:35,476 [DEBUG] stdout:  M .DS_Store
 M .env
 M .env.example
 M README.md
 M poetry.lock
 M pyproject.toml
 M requirements.txt
 D script/fix_syntax_errors.py
 M src/.DS_Store
 M src/__pycache__/__init__.cpython-311.pyc
 M src/__pycache__/main.cpython-311.pyc
 M src/ai_explain/__pycache__/__init__.cpython-311.pyc
 M src/ai_explain/__pycache__/assistant.cpython-311.pyc
 M src/ai_explain/__pycache__/exporters.cpython-311.pyc
 M src/ai_explain/__pycache__/knowledge_base.cpython-311.pyc
 M src/ai_explain/__pycache__/models.cpython-311.pyc
 M src/ai_explain/__pycache__/utils.cpython-311.pyc
 M src/api/__init__.py
 M src/api/__pycache__/__init__.cpython-311.pyc
 M src/api/__pycache__/api.cpython-311.pyc
 M src/api/__pycache__/main.cpython-311.pyc
 M src/api/__pycache__/schemas.cpython-311.pyc
 M src/api/api.py
 M src/api/main.py
 M src/api/schemas.py
 M src/app/__pycache__/xml_utils.cpython-311.pyc
 M src/app/utils/__pycache__/xml_utils.cpython-311.pyc
 M src/app/utils/xml_utils.py
 M src/cli/__pycache__/__init__.cpython-311.pyc
 M src/cli/generate_report.py
 M src/config/__pycache__/settings.cpython-311.pyc
 M src/csrd_assistant/__pycache__/__init__.cpython-311.pyc
 M src/csrd_assistant/__pycache__/assistant.cpython-311.pyc
 M src/csrd_assistant/assistant.py
 M src/csrd_assistant/config/__pycache__/__init__.cpython-311.pyc
 M src/csrd_assistant/config/__pycache__/config.cpython-311.pyc
 M src/csrd_assistant/csrd_cli/__pycache__/__init__.cpython-311.pyc
 M src/csrd_assistant/csrd_cli/__pycache__/cli.cpython-311.pyc
 M src/csrd_assistant/csrd_sdk/__pycache__/__init__.cpython-311.pyc
 M src/csrd_assistant/csrd_sdk/__pycache__/sdk.cpython-311.pyc
 M src/data/.DS_Store
 M src/export/__pycache__/__init__.cpython-311.pyc
 M src/export/__pycache__/tracecalc_reporter.cpython-311.pyc
 M src/export/tracecalc_reporter.py
 M src/factortrace/.DS_Store
 M src/factortrace/__init__.py
 M src/factortrace/__pycache__/__init__.cpython-311.pyc
 M src/factortrace/__pycache__/compliance_engine.cpython-311.pyc
 M src/factortrace/__pycache__/emissions_calculator.cpython-311.pyc
 M src/factortrace/__pycache__/emissions_voucher.cpython-311.pyc
 M src/factortrace/__pycache__/enums.cpython-311.pyc
 M src/factortrace/__pycache__/factor_loader.cpython-311.pyc
 M src/factortrace/__pycache__/main.cpython-311.pyc
 M src/factortrace/__pycache__/quality.cpython-311.pyc
 M src/factortrace/__pycache__/schema_loader.cpython-311.pyc
 M src/factortrace/__pycache__/schemas.cpython-311.pyc
 M src/factortrace/__pycache__/shared_enums.cpython-311.pyc
 M src/factortrace/__pycache__/tracecalc.cpython-311.pyc
 M src/factortrace/__pycache__/utils.cpython-311.pyc
 M src/factortrace/__pycache__/voucher_types.cpython-311.pyc
 M src/factortrace/__pycache__/voucher_xml_serializer.cpython-311.pyc
 M src/factortrace/api/__pycache__/__init__.cpython-311.pyc
 M src/factortrace/api/__pycache__/routes_voucher.cpython-311.pyc
 M src/factortrace/api/routes_voucher.py
 M src/factortrace/compliance_engine.py
 M src/factortrace/emissions_calculator.py
 M src/factortrace/emissions_voucher.py
 M src/factortrace/enums.py
 M src/factortrace/factor_loader.py
 M src/factortrace/main.py
 M src/factortrace/models/__init__.py
 M src/factortrace/models/__pycache__/__init__.cpython-311.pyc
 D src/factortrace/models/__pycache__/climate.cpython-311.pyc
 M src/factortrace/models/__pycache__/common_enums.cpython-311.pyc
 M src/factortrace/models/__pycache__/emission_data.cpython-311.pyc
 M src/factortrace/models/__pycache__/emissions_voucher.cpython-311.pyc
 M src/factortrace/models/__pycache__/enums.cpython-311.pyc
 M src/factortrace/models/__pycache__/materiality.cpython-311.pyc
 M src/factortrace/models/__pycache__/types.cpython-311.pyc
 M src/factortrace/models/__pycache__/voucher_generator.cpython-311.pyc
 M src/factortrace/models/__pycache__/vouchers.cpython-311.pyc
 M src/factortrace/models/climate.py
 M src/factortrace/models/common_enums.py
 M src/factortrace/models/emission_data.py
 M src/factortrace/models/emissions.py
 M src/factortrace/models/emissions_voucher.py
 M src/factortrace/models/enums.py
 M src/factortrace/models/materiality.py
 M src/factortrace/models/types.py
 M src/factortrace/models/uncertainty_model.py
 M src/factortrace/models/voucher_generator.py
 M src/factortrace/routes/__init__.py
 M src/factortrace/routes/__pycache__/__init__.cpython-311.pyc
 M src/factortrace/routes/__pycache__/admin.cpython-311.pyc
 M src/factortrace/routes/admin.py
 M src/factortrace/schema_loader.py
 M src/factortrace/schemas.py
 M src/factortrace/services/__pycache__/__init__.cpython-311.pyc
 M src/factortrace/services/__pycache__/audit.cpython-311.pyc
 M src/factortrace/services/__pycache__/generator.cpython-311.pyc
 M src/factortrace/services/__pycache__/validator.cpython-311.pyc
 M src/factortrace/services/__pycache__/xbrl_exporter.cpython-311.pyc
 M src/factortrace/services/audit.py
 M src/factortrace/shared_enums.py
 M src/factortrace/templates/ixbrl_template.xhtml
 M src/factortrace/tracecalc.py
 M src/factortrace/utils.py
 M src/factortrace/utils/__init__.py
 M src/factortrace/utils/__pycache__/__init__.cpython-311.pyc
 M src/factortrace/utils/__pycache__/coerce.cpython-311.pyc
 M src/factortrace/utils/__pycache__/xml_export.cpython-311.pyc
 M src/factortrace/utils/__pycache__/xml_validation.cpython-311.pyc
 M src/factortrace/utils/coerce.py
 M src/factortrace/utils/xml_export.py
 M src/factortrace/utils/xml_validation.py
 M src/factortrace/voucher_types.py
 M src/factortrace/voucher_xml_serializer.py
 M src/generator/.DS_Store
 M src/generator/__init__.py
 M src/generator/__pycache__/__init__.cpython-311.pyc
 M src/generator/__pycache__/arelle_validator.cpython-311.pyc
 M src/generator/__pycache__/batch_runner.cpython-311.pyc
 M src/generator/__pycache__/core.cpython-311.pyc
 M src/generator/__pycache__/retry_failed.cpython-311.pyc
 M src/generator/__pycache__/validator.cpython-311.pyc
 M src/generator/__pycache__/voucher_generator.cpython-311.pyc
 M src/generator/__pycache__/xhtml_generator.cpython-311.pyc
 M src/generator/arelle_validator.py
 M src/generator/batch_runner.py
 M src/generator/retry_failed.py
 M src/generator/voucher_generator.py
 M src/generator/xhtml_generator.py
 M src/main.py
 M src/resources/.DS_Store
 M src/resources/schema/voucher.xsd
 M src/routes/__pycache__/report.cpython-311.pyc
 M src/routes/report.py
 M src/validator/__pycache__/voucher_validator.cpython-311.pyc
 M tests/__init__.py
 M tests/__pycache__/__init__.cpython-311.pyc
 D tests/__pycache__/conftest.cpython-311.pyc
 D tests/__pycache__/manual_scratch.cpython-311.pyc
 D tests/__pycache__/test_data.cpython-311.pyc
 D tests/__pycache__/test_emissions.cpython-311.pyc
 D tests/__pycache__/test_materiality_model.cpython-311.pyc
 D tests/__pycache__/test_pass.cpython-311.pyc
 D tests/__pycache__/test_serializer.cpython-311.pyc
 D tests/__pycache__/test_uncertainty_model.cpython-311.pyc
 D tests/__pycache__/test_voucher_api.cpython-311.pyc
 D tests/__pycache__/test_voucher_generator.cpython-311.pyc
 D tests/__pycache__/test_voucher_model.cpython-311.pyc
 D tests/__pycache__/test_vsme_validation.cpython-311.pyc
 D tests/__pycache__/test_xbrl_validation.cpython-311.pyc
 M tests/conftest.py
 D tests/data/__pycache__/sample_data.cpython-311.pyc
 D tests/data/__pycache__/voucher_sample.cpython-311.pyc
 M tests/data/sample_data.py
 M tests/data/voucher_sample.py
 M tests/manual_scratch.py
 M tests/test_data.py
 M tests/test_materiality_model.py
 M tests/test_pass.py
 M tests/test_serializer.py
 M tests/test_uncertainty_model.py
 M tests/test_voucher_api.py
 M tests/test_voucher_generator.py
 M tests/test_voucher_model.py
 M tests/test_vsme_validation.py
 M tests/test_xbrl_validation.py
?? Scope3Tool.code-workspace
?? __pycache__/
?? add_all_esrs_sections.py
?? add_csrd_compliance.py
?? add_esrs_sections.py
?? add_export_method.py
?? add_missing_methods.py
?? add_pdf_methods.py
?? all_issues_test.xhtml
?? analyze_pdf_handler.py
?? analyze_structure.py
?? ast_repair.py
?? auto_fix_critical_syntax.py
?? auto_tagged.xhtml
?? backend/
?? backup_flagged_files.py
?? bad_filing.xhtml
?? broken_backup/
?? check_dependencies.py
?? check_typescript_issues.py
?? claude_groups.txt
?? clean_markdown_fences.py
?? cleanup_pdf_handler.py
?? complete_esrs.xhtml
?? complete_esrs_output.xml
?? complete_report.txt
?? complete_report_final.xml
?? complete_report_tagged.xml
?? complete_report_tagged_esrs.xml
?? complete_test.xhtml
?? create_perfect_pdf_handler.py
?? debug_rules.py
?? deep_repair_DISABLED.py
?? diagnose_error.py
?? enhance_pdf_all_sections.py
?? enhance_pdf_complete.esrs.py
?? enhance_pdf_complete_esrs.py
?? esrs_test.xhtml
?? factortrace-frontend/
?? final_report.html
?? final_report.xhtml
?? final_sanitizer.py
?? final_signature.json
?? final_test.xhtml
?? final_test_summary.py
?? fix_addFooters_syntax.py
?? fix_all.sh
?? fix_all_syntax.py
?? fix_class_boundaries.py
?? fix_class_final.py
?? fix_class_structure.py
?? fix_common_syntax_issues.py
?? fix_esrs_final.py
?? fix_esrs_placement.py
?? fix_flagged_files.py
?? fix_html.py
?? fix_imports.py
?? fix_interface_context.py
?? fix_interface_syntax.py
?? fix_method_placement.py
?? fix_method_placement_final.py
?? fix_method_syntax.py
?? fix_page_number.py
?? fix_pdf_properties.py
?? fix_pdf_template_literals.py
?? fix_production_signer.py
?? fix_quotes.py
?? fix_reconcile_syntax.py
?? fix_rightText.py
?? fix_rules.py
?? fix_syntax.py
?? fix_syntax_fragments.py
?? fix_template_literals.py
?? fix_test_imports.py
?? fix_trailing_quotes.py
?? fix_unterminated_string.py
?? fixed_esrs_update.py
?? fixme_review_log.txt
?? good_filing.xhtml
?? group_generator.py
?? high.txt
?? insertion_points.txt
?? lib/
?? low.txt
?? medium.txt
?? migrate_v4_complete.py
?? migration.log
?? migration_debug.log
?? migration_requirements.txt
?? my_output.xml
?? my_output_fixed.xml
?? my_report.txt
?? only_real_fixme.txt
?? output.xhtml
?? output.xml
?? package-lock.json
?? precise_esrs_update.py
?? quote_closer.py
?? rebuild_pdf_complete.py
?? rebuild_pdf_handler.py
?? remove_compliance_sections.py
?? repair_codebase.py
?? report.html
?? report.xhtml
?? restore_pdf_clean.py
?? restore_pdf_handler.py
?? run_all_tests.py
?? safe_auto_fix.py
?? sample_filing.xhtml
?? scan_syntax_issues.py
?? scope3_error.xhtml
?? scope3_full.xhtml
?? scope3_test.xhtml
?? script/auto_fixer.py
?? second_pass_fixer.py
?? setup_complete_esrs.sh
?? setup_efrag_fixed.sh
?? setup_efrag_taxonomy.sh
?? signature.json
?? simple_test_summary.py
?? src.zip
?? src/__pycache__/app_simple.cpython-311.pyc
?? src/__pycache__/scope3_api.cpython-311.pyc
?? src/api/routes/
?? src/app/.DS_Store
?? src/app_simple.py
?? src/cli/__pycache__/generate_report.cpython-311.pyc
?? src/cli/compliance_report_cli.py
?? src/csrd_assistant/.DS_Store
?? src/emissions-dashboard.html
?? src/export/.DS_Store
?? src/export/tracecalc_reporter.py.bak
?? src/factortrace/__pycache__/app.cpython-311.pyc
?? src/factortrace/api/routes/
?? src/factortrace/app.py
?? src/factortrace/app/
?? src/factortrace/exporters/
?? src/factortrace/factor_loader.py.backup
?? src/factortrace/generator/
?? src/factortrace/models/__pycache__/emissions_record.cpython-311.pyc
?? src/factortrace/models/__pycache__/uncertainty_model.cpython-311.pyc
?? src/factortrace/models/data_quality.py
?? src/factortrace/models/emissions_record.py
?? src/factortrace/routes/__pycache__/compliance.cpython-311.pyc
?? src/factortrace/routes/__pycache__/export.cpython-311.pyc
?? src/factortrace/routes/__pycache__/generate.cpython-311.pyc
?? src/factortrace/routes/compliance.py
?? src/factortrace/routes/export.py
?? src/factortrace/routes/generate.py
?? src/factortrace/utils/schema_validator.py
?? src/factortrace/utils/zip_utils.py
?? src/fix_all_strings.py
?? src/fix_strings.py
?? src/main_simple.py
?? src/models/
?? src/routes/voucher.py
?? src/scope3_api_original.py
?? src/services/
?? src_old/
?? start-factortrace.sh
?? surgical_fixer.py
?? surgical_syntax_fixer.py
?? sweep_cleaner.py
?? syntax_surgeon.py
?? temp_fix.py
?? test-tailwind/
?? test.xhtml
?? test_all_issues.xhtml
?? test_document.txt
?? test_file_1.xhtml
?? test_file_2.xhtml
?? test_file_3.xhtml
?? test_file_4.xhtml
?? test_file_5.xhtml
?? test_ixbrl.json
?? test_output.html
?? test_results.txt
?? test_rollup.xhtml
?? test_simple.xhtml
?? test_summary.py
?? test_units.xhtml
?? tests/__pycache__/__init__.cpython-313.pyc
?? tests/__pycache__/conftest.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_data.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_emission_voucher_parsing.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_emission_voucher_validation.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_emissions.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_generator.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_materiality_model.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_serializer.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_uncertainty_model.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_voucher_model.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_xbrl_validation.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_xhtml_export.cpython-311-pytest-8.4.0.pyc
?? tests/__pycache__/test_xhtml_generator.cpython-311-pytest-8.4.0.pyc
?? tests/manual_scratch.py.bak2
?? tests/sample_voucher.json
?? tests/test_emission_voucher_parsing.py
?? tests/test_emission_voucher_validation.py
?? tests/test_generator.py
?? tests/test_message_imprint.py
?? tests/test_xhtml_export.py
?? tests/test_xhtml_generator.py
?? tools/
?? update_calculator.py
?? update_pdf_handler.py
?? update_pdf_handler_v2.py
?? voucher-taxonomy-v1.0/
?? whitespace_test.xhtml
?? xpath31/

2025-07-28 16:53:35,476 [INFO] ‚ùå Step 1: Branch & Freeze - failed
2025-07-28 16:53:35,476 [WARNING] üö® ROLLBACK INITIATED
2025-07-28 16:53:35,477 [INFO] Running: git reset --hard HEAD
2025-07-28 16:53:35,567 [DEBUG] stdout: HEAD is now at b5f6a87 Initial commit before fixing syntax issues

2025-07-28 16:53:35,567 [INFO] Running: git checkout main
2025-07-28 16:53:35,589 [DEBUG] stdout: Your branch is ahead of 'origin/main' by 2 commits.
  (use "git push" to publish your local commits)

2025-07-28 16:53:35,589 [DEBUG] stderr: Already on 'main'

2025-07-28 16:53:35,589 [INFO] Rollback complete. Check migration_failure.json for details.
2025-07-28 16:53:35,589 [ERROR] Migration failed: Step 1 failed: Branch & Freeze
2025-07-28 16:53:35,589 [ERROR] Check migration_failure.json for details
